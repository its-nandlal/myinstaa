<% include ./partials/header.ejs %>

<div class="w-full min-h-screen py-1  bg-zinc-900">

    <div id="Story" class="mt-[3rem]  pt-[.8rem] pb-2 w-full h-fit border-b-[1.5px] border-zinc-700">

        <div class="px-3 w-full h-fit overflow-y-hidden overflow-x-scroll flex gap-2">

            <div class="w-[3.8rem] overflow-hidden text-ellipsis flex flex-col items-start justify-center flex-shrink-0">
                <div class="w-[3.8rem] h-[3.8rem] p-[.15rem] bg-gradient-to-r from-[#f2ff35] to-[#ff3b79] rounded-full overflow-hidden">
                    <img class="w-full h-full object-cover rounded-full" src="https://i.pinimg.com/736x/de/fc/86/defc86ab64c8a878a22445504d04a419.jpg" alt="">
                </div>
                <span class="text-[.8rem] text-nowrap m-auto">its-nandlal</span>
            </div>
    
            <div class="w-[3.8rem] overflow-hidden text-ellipsis flex flex-col items-start justify-center flex-shrink-0">
                <div class="w-[3.8rem] h-[3.8rem] p-[.15rem] bg-gradient-to-r from-[#f2ff35] to-[#ff3b79] rounded-full overflow-hidden">
                    <img class="w-full h-full object-cover rounded-full" src="https://i.pinimg.com/236x/f4/31/70/f43170dfd9812faad7256a7ed6a5caed.jpg" alt="">
                </div>
                <span class="text-[.75rem] text-nowrap m-auto">manvandersingh</span>
            </div>
            <div class="w-[3.8rem] overflow-hidden text-ellipsis flex flex-col items-start justify-center flex-shrink-0">
                <div class="w-[3.8rem] h-[3.8rem] p-[.15rem] bg-gradient-to-r from-[#f2ff35] to-[#ff3b79] rounded-full overflow-hidden">
                    <img class="w-full h-full object-cover rounded-full" src="https://i.pinimg.com/236x/c3/a1/bb/c3a1bb4934a1de0d50f3b8706ac4b9e6.jpg" alt="">
                </div>
                <span class="text-[.75rem] text-nowrap m-auto">i</span>
            </div>

        </div>



    </div>


    <div class="mt-4 Posts w-full h-fit">


        <% post.reverse().forEach((elem)=>{ %>

            <div class="post w-full">

                <div class="phead w-full px-3 py-[.35rem]">
    
                    <div class="flex items-center justify-between">
    
                        <div class="flex items-center gap-2">
    
                            <div class=" w-10 h-10 bg-gradient-to-r from-[#f2ff35] to-[#ff3b79] rounded-full overflow-hidden">
                                <img class="w-full h-full object-cover rounded-full bg-zinc-200" src="/images/uploads/dp/<%= elem.userId.dp %>" alt="">
                            </div>
                            <div>
                                <span class="block text-[.9rem]"><%= elem.userId.username %></span>
                            </div>
    
                        </div>
    
                        <div>
                            <svg width="2rem" height="1rem" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="#ffffff" class="bi bi-three-dots-vertical" transform="rotate(90)" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path> </g></svg>
                        </div>
    
                    </div>
    
                </div>
    
                <div class="pimg w-full max-h-[70vh] bg-slate-200 overflow-hidden">
                    <img class="w-full h-fit object-cover" src="/images/uploads/posts/<%= elem.postImage %>" alt="">
                </div>
    
                <div class="px-3 pt-[.3rem] flex items-center justify-between">
                    <div class="flex items-center gap-2">

                        <% if(elem.postLikes.indexOf(user._id) === -1){ %>
                            <i data-postId="<%= elem.id %>" class="like ri-heart-line text-[24px]"></i>
                       <% }else { %>
                        <i data-postId="<%= elem.id %>" class="like ri-heart-fill text-red-600 text-[24px]"></i>
                       <% } %>

                        <i class="ri-chat-3-line text-[24px]"></i>
                        <i class="ri-share-circle-line text-[24px]"></i>
                    </div>
    
                    <div>

                        <% if(user.savePost.indexOf(elem._id) === -1){ %>
                            <i data-saveid="<%= elem.id %>" class="savePost ri-bookmark-line text-[24px]"></i>
                            <% } else{ %>
                                <i data-saveid="<%= elem.id %>" class="savePost ri-bookmark-fill text-white text-[24px]"></i>
                      <% } %>

                    </div>
    
                </div>
    
                <div class="px-3">
                    <span class="likesCounts text-[.9rem]"><%= elem.postLikes.length %> Likes</span>
                </div>
    
                <div class="px-3">
                    <p class="text-[.95rem] w-[97%]"> <span class="pr-1"><%= elem.userId.username %></span> <%= elem.postCaption  %></p>
                </div>
    
            </div>

       <% }) %>



    </div>

</div>

<script src="/javascripts/feed.js"></script>


<% include ./partials/footer.ejs %>

